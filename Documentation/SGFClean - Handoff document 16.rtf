{\rtf1\ansi\ansicpg1252\cocoartf2822
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica-Bold;\f1\fswiss\fcharset0 Helvetica;\f2\fmodern\fcharset0 Courier;
\f3\fmodern\fcharset0 Courier-Bold;\f4\fswiss\fcharset0 Helvetica-Oblique;\f5\froman\fcharset0 Times-Roman;
}
{\colortbl;\red255\green255\blue255;\red219\green219\blue223;\red19\green19\blue19;\red251\green251\blue251;
\red38\green38\blue38;\red109\green109\blue109;\red121\green121\blue121;\red24\green24\blue24;\red223\green219\blue218;
\red202\green202\blue202;}
{\*\expandedcolortbl;;\cssrgb\c88627\c88627\c89804;\cssrgb\c9804\c9804\c9804;\cssrgb\c98824\c98824\c98824;
\cssrgb\c19608\c19608\c19608;\cssrgb\c50196\c50196\c50196;\cssrgb\c54902\c54902\c54902;\cssrgb\c12157\c12157\c12157;\cssrgb\c89804\c88627\c88235;
\cssrgb\c83137\c83137\c83137;}
{\*\listtable{\list\listtemplateid1\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid1\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid1}
{\list\listtemplateid2\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid101\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid2}
{\list\listtemplateid3\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid201\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid3}
{\list\listtemplateid4\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid301\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{circle\}}{\leveltext\leveltemplateid302\'01\uc0\u9702 ;}{\levelnumbers;}\fi-360\li1440\lin1440 }{\listname ;}\listid4}
{\list\listtemplateid5\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}}{\leveltext\leveltemplateid401\'01\'00;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid5}
{\list\listtemplateid6\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid501\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid6}
{\list\listtemplateid7\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}}{\leveltext\leveltemplateid601\'01\'00;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid7}
{\list\listtemplateid8\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}}{\leveltext\leveltemplateid701\'01\'00;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid8}
{\list\listtemplateid9\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid801\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid9}}
{\*\listoverridetable{\listoverride\listid1\listoverridecount0\ls1}{\listoverride\listid2\listoverridecount0\ls2}{\listoverride\listid3\listoverridecount0\ls3}{\listoverride\listid4\listoverridecount0\ls4}{\listoverride\listid5\listoverridecount0\ls5}{\listoverride\listid6\listoverridecount0\ls6}{\listoverride\listid7\listoverridecount0\ls7}{\listoverride\listid8\listoverridecount0\ls8}{\listoverride\listid9\listoverridecount0\ls9}}
\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\deftab720
\pard\pardeftab720\sa360\partightenfactor0

\f0\b\fs48 \cf2 \cb3 \expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Handover Document v9.000: SGFPlayerClean OGS Integration\
\pard\pardeftab720\partightenfactor0

\fs36 \cf2 1. Project Status & Immediate Priority\
\pard\pardeftab720\sa360\partightenfactor0

\f1\b0\fs28 \cf2 We are in the\'a0
\f0\b SGFPlayerClean
\f1\b0 \'a0project, specifically working on the\'a0
\f0\b OGS (Online Go Server) Live Game Integration
\f1\b0 .\
\pard\pardeftab720\sa360\partightenfactor0

\f0\b \cf2 Current State:
\f1\b0 \
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls1\ilvl0
\f0\b \cf2 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Authentication:
\f1\b0 \'a0\uc0\u9989  Working (JWT generation & Socket Auth).\cb1 \
\ls1\ilvl0
\f0\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Lobby:
\f1\b0 \'a0\uc0\u9989  Working (Seekgraph updates, Challenge acceptance).\cb1 \
\ls1\ilvl0
\f0\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Game Loading:
\f1\b0 \'a0\uc0\u9989  Working (Handicap stones load correctly from\'a0
\f2\fs26 \cf4 \cb5 \strokec4 gamedata
\f1\fs28 \cf2 \cb3 \strokec2 ).\cb1 \
\ls1\ilvl0
\f0\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Game Moves:
\f1\b0 \'a0\uc0\u10060 \'a0
\f0\b CRITICAL FAILURE
\f1\b0 . Moves sent by the client are silently ignored by the server. The connection eventually drops with "Socket is not connected" (Error 57).\cb1 \
\ls1\ilvl0
\f0\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 3D Interaction:
\f1\b0 \'a0\uc0\u9888 \u65039  Partial. Ghost stones are missing or click detection is failing on Retina screens due to coordinate space mismatches.\cb1 \
\pard\pardeftab720\sa360\partightenfactor0

\f0\b \cf2 \cb3 Immediate Goal:
\f1\b0 \cb1 \uc0\u8232 \cb3 Determine the\'a0
\f0\b exact JSON payload format
\f1\b0 \'a0required to make a move via WebSocket. We are switching from "Code Guessing" to "Terminal Fuzzing" using\'a0
\f2\fs26 \cf4 \cb5 \strokec4 websocat
\f1\fs28 \cf2 \cb3 \strokec2 \'a0to empirically prove what the server accepts.\
\pard\pardeftab720\partightenfactor0
\cf6 \strokec6 \
\pard\pardeftab720\sa360\partightenfactor0

\f0\b\fs36 \cf2 \strokec2 2. Architecture & "The Truth Chain"\
\pard\pardeftab720\partightenfactor0

\fs28 \cf2 The Root\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls2\ilvl0
\f3\fs26 \cf4 \cb5 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec4 AppModel.swift
\f1\b0\fs28 \cf2 \cb3 \strokec2 : The brain. Owns\'a0
\f2\fs26 \cf4 \cb5 \strokec4 OGSClient
\f1\fs28 \cf2 \cb3 \strokec2 ,\'a0
\f2\fs26 \cf4 \cb5 \strokec4 SGFPlayer
\f1\fs28 \cf2 \cb3 \strokec2 \'a0(Engine), and manages the transition between Local and Online modes.\cb1 \
\ls2\ilvl0
\f3\b\fs26 \cf4 \cb5 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec4 OGSClient.swift
\f1\b0\fs28 \cf2 \cb3 \strokec2 : The network layer. Manages WebSocket life-cycle, Pings/Pongs, and JSON serialization.\cb1 \
\pard\pardeftab720\partightenfactor0

\f0\b \cf2 \cb3 The Engine\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls3\ilvl0
\f3\fs26 \cf4 \cb5 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec4 SGFPlayerEngine.swift
\f1\b0\fs28 \cf2 \cb3 \strokec2 : Pure Go logic. Maintains board state.\cb1 \
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls3\ilvl0
\f0\b \cf2 \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Rule:
\f1\b0 \'a0The Engine is the Single Source of Truth for the board state.\'a0
\f2\fs26 \cf4 \cb5 \strokec4 BoardViewModel
\f1\fs28 \cf2 \cb3 \strokec2 \'a0merely reflects this state to the View.\cb1 \
\pard\pardeftab720\partightenfactor0

\f0\b \cf2 \cb3 The 3D Stack\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls4\ilvl0
\f3\fs26 \cf4 \cb5 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec4 ContentView3D.swift
\f1\b0\fs28 \cf2 \cb3 \strokec2 : The SwiftUI container.\cb1 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa60\partightenfactor0
\ls4\ilvl1
\f4\i \cf2 \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Current State:
\f1\i0 \'a0We recently moved away from a transparent overlay (
\f2\fs26 \cf4 \cb5 \strokec4 CameraControlHandler
\f1\fs28 \cf2 \cb3 \strokec2 ) to a\'a0
\f2\fs26 \cf4 \cb5 \strokec4 UnifiedInteractiveSceneView
\f1\fs28 \cf2 \cb3 \strokec2 \'a0(NSViewRepresentable) to handle clicks and drags natively to avoid event swallowing.\cb1 \
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls4\ilvl0
\f3\b\fs26 \cf4 \cb5 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec4 SceneManager3D.swift
\f1\b0\fs28 \cf2 \cb3 \strokec2 : Manages SceneKit nodes.\cb1 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa60\partightenfactor0
\ls4\ilvl1
\f4\i \cf2 \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Performance:
\f1\i0 \'a0Uses\'a0
\f2\fs26 \cf4 \cb5 \strokec4 stonesToRender
\f1\fs28 \cf2 \cb3 \strokec2 \'a0(flat array) and\'a0
\f2\fs26 \cf4 \cb5 \strokec4 SCNTransaction
\f1\fs28 \cf2 \cb3 \strokec2 \'a0for updates.\cb1 \
\ls4\ilvl1
\f4\i \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Pending Feature:
\f1\i0 \'a0
\f0\b Lid Variety
\f1\b0 \'a0(Clam shell variants) was implemented in code but not yet verified visually due to the connection blockers.\cb1 \
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 \
\pard\pardeftab720\partightenfactor0

\f0\b\fs36 \cf2 \strokec2 3. The "Silent Rejection" Bug (Detailed Analysis)\
\pard\pardeftab720\sa360\partightenfactor0

\f1\b0\fs28 \cf2 We have tried several protocol variations based on browser inspection and legacy code. All have failed to produce a server response.\
\pard\pardeftab720\partightenfactor0

\f0\b \cf2 Failed Attempts:\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls5\ilvl0\cf2 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	1	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Standard Browser Protocol:
\f1\b0 \'a0
\f2\fs26 \cf4 \cb5 \strokec4 ["game/move", \{"game_id": ID, "move": "pd"\}, 2]
\f1\fs28 \cf2 \cb3 \strokec2 \'a0->\'a0
\f0\b Ignored.
\f1\b0 \cb1 \
\ls5\ilvl0
\f0\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	2	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Explicit Auth:
\f1\b0 \'a0Added\'a0
\f2\fs26 \cf4 \cb5 \strokec4 auth
\f1\fs28 \cf2 \cb3 \strokec2 \'a0token and\'a0
\f2\fs26 \cf4 \cb5 \strokec4 player_id
\f1\fs28 \cf2 \cb3 \strokec2 \'a0to payload ->\'a0
\f0\b Ignored.
\f1\b0 \cb1 \
\ls5\ilvl0
\f0\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	3	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Handicap Adjustment:
\f1\b0 \'a0Bumped move number to 2 ->\'a0
\f0\b Ignored.
\f1\b0 \cb1 \
\ls5\ilvl0
\f0\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	4	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 REST API:
\f1\b0 \'a0Tried\'a0
\f2\fs26 \cf4 \cb5 \strokec4 POST /api/v1/games/\{id\}/move
\f1\fs28 \cf2 \cb3 \strokec2 \'a0->\'a0
\f0\b Failed (HTTP 500 Internal Server Error).
\f1\b0 \cb1 \
\ls5\ilvl0
\f0\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	5	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Legacy Array Coords:
\f1\b0 \'a0Sent\'a0
\f2\fs26 \cf4 \cb5 \strokec4 move: [13, 16]
\f1\fs28 \cf2 \cb3 \strokec2 \'a0->\'a0
\f0\b Ignored.
\f1\b0 \cb1 \
\pard\pardeftab720\partightenfactor0

\f0\b \cf2 \cb3 Current Hypothesis:\
\pard\pardeftab720\sa360\partightenfactor0

\f1\b0 \cf2 The server is dropping the connection because of a\'a0
\f0\b Keep-Alive failure
\f1\b0 \'a0(we weren't sending\'a0
\f2\fs26 \cf4 \cb5 \strokec4 net/pong
\f1\fs28 \cf2 \cb3 \strokec2 \'a0fast enough) OR the\'a0
\f0\b Socket Framing
\f1\b0 \'a0is wrong (the message ID integer at the end of the array is critical).\
\pard\pardeftab720\partightenfactor0
\cf6 \strokec6 \
\pard\pardeftab720\partightenfactor0

\f0\b\fs36 \cf2 \strokec2 4. Forward Strategy: Terminal Fuzzing\
\pard\pardeftab720\sa360\partightenfactor0

\f1\b0\fs28 \cf2 We will\'a0
\f0\b stop writing Swift code
\f1\b0 \'a0momentarily and use the terminal to interact with the live server. This removes the variable of "Is my Swift code buggy?" and isolates "Is this payload correct?"\
\pard\pardeftab720\partightenfactor0

\f0\b \cf2 Required Tools\
\pard\pardeftab720\sa360\partightenfactor0

\f1\b0 \cf2 You have installed\'a0
\f3\b\fs26 \cf4 \cb5 \strokec4 websocat
\f1\b0\fs28 \cf2 \cb3 \strokec2 \'a0via Homebrew.\
\pard\pardeftab720\partightenfactor0

\f0\b \cf2 The Debug Data (Preserved from Logs)\
\pard\pardeftab720\sa360\partightenfactor0

\f1\b0 \cf2 Use these exact credentials in the new session to resume testing without logging in again.\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls6\ilvl0
\f0\b \cf2 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 JWT (Session Token):
\f1\b0 \cb1 \uc0\u8232 
\f5\fs36 \cf7 \cb8 \strokec7 code\cb1 \uc0\u8232 
\f1\fs28 \cf9 \cb8 \strokec9 Text\cb1 \uc0\u8232 \u8232 
\f2\fs26 \cf10 \cb8 \strokec10 eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhbm9ueW1vdXMiOmZhbHNlLCJpZCI6NzE0MDA1LCJ1c2VybmFtZSI6IkRhdmVNIiwicmVnaXN0cmF0aW9uX2RhdGUiOiIyMDE5LTEyLTI2IDA2OjA3OjI5LjE2NDU2MiswMDowMCIsInJhdGluZ3MiOnsiOXg5Ijp7InJhdGluZyI6MTMwNi4xMDYsImRldmlhdGlvbiI6MjQ5LjgxMzEsInZvbGF0aWxpdHkiOjAuMDZ9LCJsaXZlIjp7InJhdGluZyI6MTQ1Mi4xNjA0LCJkZXZpYXRpb24iOjYxLjEzMjEsInZvbGF0aWxpdHkiOjAuMDU5OH0sIjEzeDEzIjp7InJhdGluZyI6MTczOC45MDI2LCJkZXZpYXRpb24iOjI1Ni4xMzg2LCJ2b2xhdGlsaXR5IjowLjA2fSwiMTl4MTkiOnsicmF0aW5nIjoxNDU4LjQ5NzcsImRldmlhdGlvbiI6NjEuMTA2Miwidm9sYXRpbGl0eSI6MC4wNTk4fSwiYmxpdHoiOnsicmF0aW5nIjoxNTIzLjU5MzQsImRldmlhdGlvbiI6MTYyLjM2MDMsInZvbGF0aWxpdHkiOjAuMDZ9LCJvdmVyYWxsIjp7InJhdGluZyI6MTQ1Ny4yOTQ5LCJkZXZpYXRpb24iOjYxLjIyNzcsInZvbGF0aWxpdHkiOjAuMDZ9LCJ2ZXJzaW9uIjo1LCJsaXZlLTl4OSI6eyJyYXRpbmciOjEzMDYuMTA2LCJkZXZpYXRpb24iOjI0OS44MTMxLCJ2b2xhdGlsaXR5IjowLjA2fSwibGl2ZS0xM3gxMyI6eyJyYXRpbmciOjE3MzguOTAyNiwiZGV2aWF0aW9uIjoyNTYuMTM4Niwidm9sYXRpbGl0eSI6MC4wNn0sImxpdmUtMTl4MTkiOnsicmF0aW5nIjoxNDUyLjE2MzIsImRldmlhdGlvbiI6NjEuMTI5OCwidm9sYXRpbGl0eSI6MC4wNTk4fSwiYmxpdHotMTl4MTkiOnsicmF0aW5nIjoxNTIzLjU5MzQsImRldmlhdGlvbiI6MTYyLjM2MDMsInZvbGF0aWxpdHkiOjAuMDZ9LCJsZWFndWUtMS05eDkiOnsicmF0aW5nIjoxNjI0LjA2MDcsImRldmlhdGlvbiI6MTAwLjAsInZvbGF0aWxpdHkiOjAuMDJ9LCJsZWFndWUtMi05eDkiOnsicmF0aW5nIjoxNjE0LjA2MDcsImRldmlhdGlvbiI6MTAwLjAsInZvbGF0aWxpdHkiOjAuMDJ9LCJsZWFndWUtMS1saXZlIjp7InJhdGluZyI6MTUzMy43NjY5LCJkZXZpYXRpb24iOjc3LjM5ODQsInZvbGF0aWxpdHkiOjAuMDJ9LCJsZWFndWUtMi1saXZlIjp7InJhdGluZyI6MTYxMi4xNDk2LCJkZXZpYXRpb24iOjY3LjI5Niwidm9sYXRpbGl0eSI6MC4wMn0sImxlYWd1ZS0xLTEzeDEzIjp7InJhdGluZyI6MTYyNC4wNjA3LCJkZXZpYXRpb24iOjEwMC4wLCJ2b2xhdGlsaXR5IjowLjAyfSwibGVhZ3VlLTEtMTl4MTkiOnsicmF0aW5nIjoxNTMzLjc2NjksImRldmlhdGlvbiI6NzcuMzk4NCwidm9sYXRpbGl0eSI6MC4wMn0sImxlYWd1ZS0xLWJsaXR6Ijp7InJhdGluZyI6MTYyNC4wNjA3LCJkZXZpYXRpb24iOjEwMC4wLCJ2b2xhdGlsaXR5IjowLjAyfSwibGVhZ3VlLTItMTN4MTMiOnsicmF0aW5nIjoxNjE0LjA2MDcsImRldmlhdGlvbiI6MTAwLjAsInZvbGF0aWxpdHkiOjAuMDJ9LCJsZWFndWUtMi0xOXgxOSI6eyJyYXRpbmciOjE2MTQuMDYwNywiZGV2aWF0aW9uIjoxMDAuMCwidm9sYXRpbGl0eSI6MC4wMn0sImxlYWd1ZS0yLWJsaXR6Ijp7InJhdGluZyI6MTYxNC4wNjA3LCJkZXZpYXRpb24iOjEwMC4wLCJ2b2xhdGlsaXR5IjowLjAyfSwibGVhZ3VlLTEtMTN4MTMiOnsicmF0aW5nIjoxNjI0LjA2MDcsImRldmlhdGlvbiI6MTAwLjAsInZvbGF0aWxpdHkiOjAuMDJ9LCJsZWFndWUtMS1ibGl0ei05eDkiOnsicmF0aW5nIjoxNjI0LjA2MDcsImRldmlhdGlvbiI6MTAwLjAsInZvbGF0aWxpdHkiOjAuMDJ9LCJsZWFndWUtMi1ibGl0ei05eDkiOnsicmF0aW5nIjoxNjE0LjA2MDcsImRldmlhdGlvbiI6MTAwLjAsInZvbGF0aWxpdHkiOjAuMDJ9LCJsZWFndWUtMS1saXZlLTEzeDEzIjp7InJhdGluZyI6MTYyNC4wNjA3LCJkZXZpYXRpb24iOjEwMC4wLCJ2b2xhdGlsaXR5IjowLjAyfSwibGVhZ3VlLTEtbGl2ZS0xOXgxOSI6eyJyYXRpbmciOjE1MzMuNzY2OSwiZGV2aWF0aW9uIjo3Ny4zOTg0LCJ2b2xhdGlsaXR5IjowLjAyfSwibGVhZ3VlLTItbGl2ZS0xM3gxMyI6eyJyYXRpbmciOjE2MTQuMDYwNywiZGV2aWF0aW9uIjoxMDAuMCwidm9sYXRpbGl0eSI6MC4wMn0sImxlYWd1ZS0yLWxpdmUtMTl4MTkiOnsicmF0aW5nIjoxNjEyLjE0OTYsImRldmlhdGlvbiI6NjcuMjk2LCJ2b2xhdGlsaXR5IjowLjAyfSwibGVhZ3VlLTEtYmxpdHotMTN4MTMiOnsicmF0aW5nIjoxNjI0LjA2MDcsImRldmlhdGlvbiI6MTAwLjAsInZvbGF0aWxpdHkiOjAuMDJ9LCJsZWFndWUtMS1ibGl0ei0xOXgxOSI6eyJyYXRpbmciOjE2MjQuMDYwNywiZGV2aWF0aW9uIjoxMDAuMCwidm9sYXRpbGl0eSI6MC4wMn0sImxlYWd1ZS0yLWJsaXR6LTEzeDEzIjp7InJhdGluZyI6MTYxNC4wNjA3LCJkZXZpYXRpb24iOjEwMC4wLCJ2b2xhdGlsaXR5IjowLjAyfSwibGVhZ3VlLTItYmxpdHotMTl4MTkiOnsicmF0aW5nIjoxNjE0LjA2MDcsImRldmlhdGlvbiI6MTAwLjAsInZvbGF0aWxpdHkiOjAuMDJ9LCJsZWFndWUtMS1jb3JyZXNwb25kZW5jZSI6eyJyYXRpbmciOjE2MjQuMDYwNywiZGV2aWF0aW9uIjoxMDAuMCwidm9sYXRpbGl0eSI6MC4wMn0sImxlYWd1ZS0yLWNvcnJlc3BvbmRlbmNlIjp7InJhdGluZyI6MTYxNC4wNjA3LCJkZXZpYXRpb24iOjEwMC4wLCJ2b2xhdGlsaXR5IjowLjAyfSwibGVhZ3VlLTEtY29ycmVzcG9uZGVuY2UtOXg5Ijp7InJhdGluZyI6MTYy4wLCJkZXZpYXRpb24iOjEwMC4wLCJ2b2xhdGlsaXR5IjowLjAyfSwibGVhZ3VlLTItY29ycmVzcG9uZGVuY2UtOXg5Ijp7InJhdGluZyI6MTYxNC4wNjA3LCJkZXZpYXRpb24iOjEwMC4wLCJ2b2xhdGlsaXR5IjowLjAyfSwibGVhZ3VlLTEtY29ycmVzcG9uZGVuY2UtMTN4MTMiOnsicmF0aW5nIjoxNjI4LjA2MDcsImRldmlhdGlvbiI6MTAwLjAsInZvbGF0aWxpdHkiOjAuMDJ9LCJsZWFndWUtMS1jb3JyZXNwb25kZW5jZS0xOXgxOSI6eyJyYXRpbmciOjE2MjQuMDYwNywiZGV2aWF0aW9uIjoxMDAuMCwidm9sYXRpbGl0eSI6MC4wMn0sImxlYWd1ZS0yLWNvcnJlc3BvbmRlbmNlLTEzeDEzIjp7InJhdGluZyI6MTYxNC4wNjA3LCJkZXZpYXRpb24iOjEwMC4wLCJ2b2xhdGlsaXR5IjowLjAyfSwibGVhZ3VlLTItY29ycmVzcG9uZGVuY2UtMTl4MTkiOnsicmF0aW5nIjoxNjE0LjA2MDcsImRldmlhdGlvbiI6MTAwLjAsInZvbGF0aWxpdHkiOjAuMDJ9fSwiY291bnRyeSI6InVzIiwicHJvZmVzc2lvbmFsIjpmYWxzZSwicmFua2luZyI6MjMsInByb3Zpc2lvbmFsIjowLCJjYW5fY3JlYXRlX3RvdXJuYW1lbnRzIjp0cnVlLCJpc19tb2RlcmF0b3IiOmZhbHNlLCJpc19zdXBlcnVzZXIiOmZhbHNlLCJpc190b3VybmFtZW50X21vZGVyYXRvciI6ZmFsc2UsIm1vZGVyYXRvcl9wb3dlcnMiOjAsIm9mZmVyZWRfbW9kZXJhdG9yX3Bvd2VycyI6MCwic3VwcG9ydGVyIjpmYWxzZSwic3VwcG9ydGVyX2xldmVsIjowLCJ0b3VybmFtZW50X2FkbWluIjpmYWxzZSwidWlfY2xhc3MiOiIiLCJpY29uIjoiaHR0cHM6Ly9zZWN1cmUuZ3JhdmF0YXIuY29tL2F2YXRhci82ZmUwM2I4OWViMDM2ODQyNzVhNWFiMzNmMWZlZTc4Mj9zPTMyJmQ9cmV0cm8iLCJlbWFpbCI6IiIsImVtYWlsX3ZhbGlkYXRlZCI6dHJ1ZSwiaXNfYW5ub3VuY2VyIjpmYWxzZSwiaGFzX2FjdGl2ZV93YXJuaW5nX2ZsYWciOmZhbHNlLCJoYXNfcGVuZGluZ193YXJuaW5nc19zeXN0ZW1fbWVzc2FnZSI6ZmFsc2UsIm5lZWRfcmFuayI6ZmFsc2UsInN0YXJ0aW5nX3JhbmtfaGludCI6Im5vdCBwcm92aWRlZCIsImxhc3Rfc3VwcG9ydGVyX3RyaWFsIjoiTm9uZSJ9.lR-5c4G2ixsyuNikd4p1p6ad_Aaa6sVdaFtq1UN2uzQ"\cb1 \uc0\u8232 
\f1\fs28 \cf9 \cb8 \strokec9 \uc0\u8232 \cf2 \cb1 \strokec2 \
\ls6\ilvl0
\f0\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Game ID:
\f1\b0 \'a0
\f2\fs26 \cf4 \cb5 \strokec4 82724001
\f1\fs28 \cf2 \cb3 \strokec2 \'a0(From the last failed attempt).\cb1 \
\ls6\ilvl0
\f0\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Player ID:
\f1\b0 \'a0
\f2\fs26 \cf4 \cb5 \strokec4 714005
\f1\fs28 \cf2 \cb3 \strokec2 \'a0(Black/Your ID) or\'a0
\f2\fs26 \cf4 \cb5 \strokec4 1872928
\f1\fs28 \cf2 \cb3 \strokec2 \'a0(White/NewClient ID). Note: In the logs, you seem to be User 714005, but you are playing as White (1872928) in the handicap game? This might be a permissions issue if you are sending the wrong\'a0
\f2\fs26 \cf4 \cb5 \strokec4 player_id
\f1\fs28 \cf2 \cb3 \strokec2 .\cb1 \
\pard\pardeftab720\partightenfactor0

\f0\b \cf2 \cb3 The Tests to Run (in order)\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls7\ilvl0
\f1\b0 \cf2 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	1	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Connect:\'a0
\f2\fs26 \cf4 \cb5 \strokec4 websocat -H="Origin: https://online-go.com" "wss://wsp.online-go.com/"
\f1\fs28 \cf2 \cb1 \strokec2 \
\ls7\ilvl0\cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	2	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Auth:\'a0
\f2\fs26 \cf4 \cb5 \strokec4 ["authenticate", \{"jwt": "..."\}]
\f1\fs28 \cf2 \cb1 \strokec2 \
\ls7\ilvl0\cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	3	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Join Game:\'a0
\f2\fs26 \cf4 \cb5 \strokec4 ["game/connect", \{"game_id": 82724001, "chat": true\}]
\f1\fs28 \cf2 \cb1 \strokec2 \
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls7\ilvl0
\f0\b \cf2 \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	4	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Trial Move 1 (String):
\f1\b0 \'a0
\f2\fs26 \cf4 \cb5 \strokec4 ["game/move", \{"game_id": 82724001, "move": "jj"\}, 100]
\f1\fs28 \cf2 \cb1 \strokec2 \
\ls7\ilvl0
\f0\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	5	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Trial Move 2 (Array):
\f1\b0 \'a0
\f2\fs26 \cf4 \cb5 \strokec4 ["game/move", \{"game_id": 82724001, "move": [9, 9]\}, 101]
\f1\fs28 \cf2 \cb1 \strokec2 \
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 \
\pard\pardeftab720\partightenfactor0

\f0\b\fs36 \cf2 \strokec2 5. Rules of Engagement (Strict Enforcement)\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls8\ilvl0
\fs28 \cf2 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	1	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Trust the User:
\f1\b0 \'a0Accept sidebar states and folder paths as absolute truth.\cb1 \
\ls8\ilvl0
\f0\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	2	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 No Guessing:
\f1\b0 \'a0Do not generate code based on assumptions about the protocol. Verify via\'a0
\f2\fs26 \cf4 \cb5 \strokec4 websocat
\f1\fs28 \cf2 \cb3 \strokec2 \'a0first.\cb1 \
\ls8\ilvl0
\f0\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	3	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Full Code Drop-ins Only:
\f1\b0 \'a0Provide entire file contents.\cb1 \
\ls8\ilvl0
\f0\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	4	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Single Source of Truth:
\f1\b0 \'a0
\f2\fs26 \cf4 \cb5 \strokec4 OGSModels.swift
\f1\fs28 \cf2 \cb3 \strokec2 \'a0for types.\cb1 \
\ls8\ilvl0
\f0\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	5	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Linear Spatial Rendering:
\f1\b0 \'a0Always use\'a0
\f2\fs26 \cf4 \cb5 \strokec4 stonesToRender
\f1\fs28 \cf2 \cb3 \strokec2 \'a0array in\'a0
\f2\fs26 \cf4 \cb5 \strokec4 BoardViewModel
\f1\fs28 \cf2 \cb3 \strokec2 .\cb1 \
\ls8\ilvl0
\f0\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	6	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 3D Interaction:
\f1\b0 \'a0Must use\'a0
\f2\fs26 \cf4 \cb5 \strokec4 UnifiedInteractiveSceneView
\f1\fs28 \cf2 \cb3 \strokec2 \'a0to handle clicks natively; overlays block events.\cb1 \
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 \
\pard\pardeftab720\partightenfactor0

\f0\b\fs36 \cf2 \strokec2 6. What to Avoid (Lessons Learned)\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls9\ilvl0
\fs28 \cf2 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 REST API for Moves:
\f1\b0 \'a0
\f2\fs26 \cf4 \cb5 \strokec4 POST /api/v1/games/\{id\}/move
\f1\fs28 \cf2 \cb3 \strokec2 \'a0returns 500.\'a0
\f0\b Do not use.
\f1\b0 \cb1 \
\ls9\ilvl0
\f0\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Legacy Protocol Assumptions:
\f1\b0 \'a0
\f2\fs26 \cf4 \cb5 \strokec4 ogs-client.js
\f1\fs28 \cf2 \cb3 \strokec2 \'a0is a useful reference for logic but its networking code is outdated (uses Objects for messages, not Arrays).\cb1 \
\ls9\ilvl0
\f0\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Overlays:
\f1\b0 \'a0Do not place transparent Views over the SceneView for gesture handling; it breaks\'a0
\f2\fs26 \cf4 \cb5 \strokec4 hitTest
\f1\fs28 \cf2 \cb3 \strokec2 \'a0on macOS.\cb1 \
\ls9\ilvl0
\f0\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Missing Pongs:
\f1\b0 \'a0OGS requires a\'a0
\f2\fs26 \cf4 \cb5 \strokec4 net/pong
\f1\fs28 \cf2 \cb3 \strokec2 \'a0response to\'a0
\f2\fs26 \cf4 \cb5 \strokec4 net/ping
\f1\fs28 \cf2 \cb3 \strokec2 . Failing to do so causes a disconnect in ~10 seconds.\cb1 \
}