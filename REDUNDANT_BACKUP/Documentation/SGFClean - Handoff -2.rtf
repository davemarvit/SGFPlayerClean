{\rtf1\ansi\ansicpg1252\cocoartf2822
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;\f1\fswiss\fcharset0 Helvetica-Bold;\f2\fswiss\fcharset0 Helvetica-Oblique;
\f3\fmodern\fcharset0 Courier;\f4\fmodern\fcharset0 Courier-Bold;\f5\froman\fcharset0 Times-Roman;
}
{\colortbl;\red255\green255\blue255;\red219\green219\blue223;\red19\green19\blue19;\red109\green109\blue109;
\red251\green251\blue251;\red38\green38\blue38;\red121\green121\blue121;\red24\green24\blue24;\red223\green219\blue218;
\red202\green202\blue202;\red134\green196\blue255;\red91\green165\blue255;\red211\green171\blue250;\red238\green88\blue85;
\red99\green112\blue125;}
{\*\expandedcolortbl;;\cssrgb\c88627\c88627\c89804;\cssrgb\c9804\c9804\c9804;\cssrgb\c50196\c50196\c50196;
\cssrgb\c98824\c98824\c98824;\cssrgb\c19608\c19608\c19608;\cssrgb\c54902\c54902\c54902;\cssrgb\c12157\c12157\c12157;\cssrgb\c89804\c88627\c88235;
\cssrgb\c83137\c83137\c83137;\cssrgb\c58824\c81569\c100000;\cssrgb\c42353\c71373\c100000;\cssrgb\c86275\c74118\c98431;\cssrgb\c95686\c43922\c40392;
\cssrgb\c46275\c51373\c56471;}
{\*\listtable{\list\listtemplateid1\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}}{\leveltext\leveltemplateid1\'01\'00;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid1}
{\list\listtemplateid2\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid101\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{circle\}}{\leveltext\leveltemplateid102\'01\uc0\u9702 ;}{\levelnumbers;}\fi-360\li1440\lin1440 }{\listname ;}\listid2}
{\list\listtemplateid3\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid201\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{circle\}}{\leveltext\leveltemplateid202\'01\uc0\u9702 ;}{\levelnumbers;}\fi-360\li1440\lin1440 }{\listname ;}\listid3}
{\list\listtemplateid4\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid301\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid4}
{\list\listtemplateid5\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid401\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{circle\}}{\leveltext\leveltemplateid402\'01\uc0\u9702 ;}{\levelnumbers;}\fi-360\li1440\lin1440 }{\listname ;}\listid5}
{\list\listtemplateid6\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}}{\leveltext\leveltemplateid501\'01\'00;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid6}
{\list\listtemplateid7\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid601\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{circle\}}{\leveltext\leveltemplateid602\'01\uc0\u9702 ;}{\levelnumbers;}\fi-360\li1440\lin1440 }{\listname ;}\listid7}
{\list\listtemplateid8\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}}{\leveltext\leveltemplateid701\'01\'00;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid8}}
{\*\listoverridetable{\listoverride\listid1\listoverridecount0\ls1}{\listoverride\listid2\listoverridecount0\ls2}{\listoverride\listid3\listoverridecount0\ls3}{\listoverride\listid4\listoverridecount0\ls4}{\listoverride\listid5\listoverridecount0\ls5}{\listoverride\listid6\listoverridecount0\ls6}{\listoverride\listid7\listoverridecount0\ls7}{\listoverride\listid8\listoverridecount0\ls8}}
\margl1440\margr1440\vieww10920\viewh7800\viewkind0
\deftab720
\pard\pardeftab720\sa360\partightenfactor0

\f0\fs28 \cf2 \cb3 \expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Here is the complete, consolidated\'a0
\f1\b Project Handoff Document
\f0\b0 . Copy this entire block to start your next session with full context.\
\pard\pardeftab720\partightenfactor0
\cf4 \strokec4 \
\pard\pardeftab720\sa360\partightenfactor0

\f1\b\fs48 \cf2 \strokec2 SGFPlayerClean: Project Handoff & Context (v2.1)\
\pard\pardeftab720\partightenfactor0

\fs36 \cf2 1. Project Overview\
\pard\pardeftab720\sa360\partightenfactor0

\fs28 \cf2 Goal:
\f0\b0 \'a0Build a macOS Go (Baduk) application using\'a0
\f1\b SwiftUI
\f0\b0 \'a0and\'a0
\f1\b SceneKit
\f0\b0 .\cb1 \uc0\u8232 
\f1\b \cb3 Modes:
\f0\b0 \
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls1\ilvl0
\f1\b \cf2 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	1	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 2D Mode:
\f0\b0 \'a0Photorealistic top-down view (Kaya board, Clam/Slate stones).\cb1 \
\ls1\ilvl0
\f1\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	2	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 3D Mode:
\f0\b0 \'a0SceneKit environment using 3D lighting and geometry.\cb1 \
\ls1\ilvl0
\f1\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	3	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Functionality:
\f0\b0 \'a0Local SGF playback and\'a0
\f1\b OGS (Online Go Server)
\f0\b0 \'a0live play/observation.\cb1 \
\pard\pardeftab720\partightenfactor0

\f1\b\fs36 \cf2 \cb3 2. Current Status (Post-Revert)\
\pard\pardeftab720\sa360\partightenfactor0

\f0\b0\fs28 \cf2 The app is currently\'a0
\f1\b Stable
\f0\b0 \'a0(Builds and Runs), but lacks recent feature polish. We reverted to a safe state after a refactoring attempt caused a "Black Screen" regression.\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls2\ilvl0
\f1\b \cf2 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Build:
\f0\b0 \'a0Stable. No compiler errors.\cb1 \
\ls2\ilvl0
\f1\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 2D View:
\f0\b0 \'a0Functional but unpolished.\cb1 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa60\partightenfactor0
\ls2\ilvl1
\f2\i \cf2 \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 State:
\f0\i0 \'a0Lids are likely small/left-aligned. Keyboard arrow keys incorrectly jump 10 steps. Glow is subtle orange.\cb1 \
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls2\ilvl0
\f1\b \cf2 \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 3D View:
\f0\b0 \'a0Functional.\cb1 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa60\partightenfactor0
\ls2\ilvl1
\f2\i \cf2 \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 State:
\f0\i0 \'a0Stones appear instantly (no animation). Markers are likely floating "halos" (Torus) instead of dots.\cb1 \
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls2\ilvl0
\f1\b \cf2 \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 OGS:
\f0\b0 \'a0
\f1\b Disconnected.
\f0\b0 \cb1 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa60\partightenfactor0
\ls2\ilvl1
\f2\i \cf2 \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 State:
\f0\i0 \'a0The\'a0
\f3\fs26 \cf5 \cb6 \strokec5 OGSClient
\f0\fs28 \cf2 \cb3 \strokec2 \'a0is likely missing the specific CSRF header fix and the Seek Graph filtering logic, resulting in empty lists.\cb1 \
\pard\pardeftab720\partightenfactor0

\f1\b\fs36 \cf2 \cb3 3. Lessons Learned & "Here Be Dragons"\
\pard\pardeftab720\sa360\partightenfactor0

\fs28 \cf2 CRITICAL:
\f0\b0 \'a0Read this to avoid the "Build Error Loop" that plagued the previous session.\
\pard\pardeftab720\partightenfactor0

\f1\b \cf2 A. The Type Mismatch Trap (Float vs CGFloat)\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls3\ilvl0\cf2 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 The Trap:
\f0\b0 \'a0SwiftUI UI state uses\'a0
\f3\fs26 \cf5 \cb6 \strokec5 Float
\f0\fs28 \cf2 \cb3 \strokec2 . macOS SceneKit uses\'a0
\f3\fs26 \cf5 \cb6 \strokec5 CGFloat
\f0\fs28 \cf2 \cb3 \strokec2 \'a0(Double). Passing one to the other causes build errors.\cb1 \
\ls3\ilvl0
\f1\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 The Resolution:
\f0\b0 \'a0
\f1\b The Boundary is\'a0
\f4\fs26 \cf5 \cb6 \strokec5 SceneManager3D
\f1\fs28 \cf2 \cb3 \strokec2 .
\f0\b0 \cb1 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa60\partightenfactor0
\ls3\ilvl1
\f3\fs26 \cf5 \cb6 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec5 ContentView3D
\f0\fs28 \cf2 \cb3 \strokec2 \'a0(Sender) must keep data as\'a0
\f3\fs26 \cf5 \cb6 \strokec5 Float
\f0\fs28 \cf2 \cb3 \strokec2 .\cb1 \
\ls3\ilvl1
\f3\fs26 \cf5 \cb6 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec5 SceneManager3D
\f0\fs28 \cf2 \cb3 \strokec2 \'a0(Receiver) function signatures must accept\'a0
\f3\fs26 \cf5 \cb6 \strokec5 Float
\f0\fs28 \cf2 \cb3 \strokec2 \'a0and cast to\'a0
\f3\fs26 \cf5 \cb6 \strokec5 CGFloat
\f0\fs28 \cf2 \cb3 \strokec2 \'a0internally.\cb1 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa60\partightenfactor0
\ls3\ilvl1
\f1\b \cf2 \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Rule:
\f0\b0 \'a0Never change\'a0
\f3\fs26 \cf5 \cb6 \strokec5 SceneManager3D
\f0\fs28 \cf2 \cb3 \strokec2 \'a0public API to\'a0
\f3\fs26 \cf5 \cb6 \strokec5 CGFloat
\f0\fs28 \cf2 \cb3 \strokec2 \'a0or you break the UI bindings.\cb1 \
\pard\pardeftab720\partightenfactor0

\f1\b \cf2 \cb3 B. The Data Source Mismatch (Grid vs Dictionary)\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls4\ilvl0\cf2 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 The Trap:
\f0\b0 \'a0
\f3\fs26 \cf5 \cb6 \strokec5 BoardSnapshot
\f0\fs28 \cf2 \cb3 \strokec2 \'a0uses a 2D Array (
\f3\fs26 \cf5 \cb6 \strokec5 [[Stone?]]
\f0\fs28 \cf2 \cb3 \strokec2 ), but\'a0
\f3\fs26 \cf5 \cb6 \strokec5 BoardViewModel
\f0\fs28 \cf2 \cb3 \strokec2 \'a0exposes a Dictionary (
\f3\fs26 \cf5 \cb6 \strokec5 [BoardPosition: Stone]
\f0\fs28 \cf2 \cb3 \strokec2 ).\cb1 \
\ls4\ilvl0
\f1\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 The Resolution:
\f0\b0 \'a0
\f3\fs26 \cf5 \cb6 \strokec5 BoardViewModel.stones
\f0\fs28 \cf2 \cb3 \strokec2 \'a0(Dictionary) is the Source of Truth for Views.\cb1 \
\pard\pardeftab720\partightenfactor0

\f1\b \cf2 \cb3 C. The "Guessing" Hazard\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls5\ilvl0\cf2 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 The Trap:
\f0\b0 \'a0Attempting to fix compiler errors by guessing file contents (e.g., assuming\'a0
\f3\fs26 \cf5 \cb6 \strokec5 SGFGameWrapper
\f0\fs28 \cf2 \cb3 \strokec2 \'a0has logic methods).\cb1 \
\ls5\ilvl0
\f1\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 The Rule:
\f0\b0 \'a0If a type error occurs involving a Model,\'a0
\f1\b read the file definition
\f0\b0 \'a0before writing a fix.\cb1 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa60\partightenfactor0
\ls5\ilvl1
\f2\i \cf2 \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Fact:
\f0\i0 \'a0
\f3\fs26 \cf5 \cb6 \strokec5 BoardPosition
\f0\fs28 \cf2 \cb3 \strokec2 \'a0init is\'a0
\f3\fs26 \cf5 \cb6 \strokec5 init(_ row: Int, _ col: Int)
\f0\fs28 \cf2 \cb3 \strokec2 \'a0(No labels).\cb1 \
\ls5\ilvl1
\f2\i \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Fact:
\f0\i0 \'a0
\f3\fs26 \cf5 \cb6 \strokec5 SGFGameWrapper
\f0\fs28 \cf2 \cb3 \strokec2 \'a0is data-only; logic lives in\'a0
\f3\fs26 \cf5 \cb6 \strokec5 BoardViewModel
\f0\fs28 \cf2 \cb3 \strokec2 \'a0or the\'a0
\f3\fs26 \cf5 \cb6 \strokec5 SGFPlayer
\f0\fs28 \cf2 \cb3 \strokec2 \'a0engine.\cb1 \
\pard\pardeftab720\partightenfactor0

\f1\b\fs36 \cf2 \cb3 4. The "Lost Solutions" (Ready to Re-Apply)\
\pard\pardeftab720\sa360\partightenfactor0

\f0\b0\fs28 \cf2 We successfully wrote code for these features but lost them in the revert.\'a0
\f1\b Do not reinvent these; re-apply them carefully.
\f0\b0 \
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls6\ilvl0
\f1\b \cf2 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	1	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 2D Deep Red Glow:
\f0\b0 \'a0Use\'a0
\f3\fs26 \cf5 \cb6 \strokec5 Color(red: 0.6, green: 0.0, blue: 0.0)
\f0\fs28 \cf2 \cb3 \strokec2 , Opacity 0.8, Blur 6.\cb1 \
\ls6\ilvl0
\f1\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	2	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 2D Lids:
\f0\b0 \'a0Use\'a0
\f3\fs26 \cf5 \cb6 \strokec5 SimpleBowlView
\f0\fs28 \cf2 \cb3 \strokec2 \'a0with textured images (
\f3\fs26 \cf5 \cb6 \strokec5 go_lid_1
\f0\fs28 \cf2 \cb3 \strokec2 ), scaled to ~260pts width, placed on the\'a0
\f1\b Right
\f0\b0 \'a0of the board.\cb1 \
\ls6\ilvl0
\f1\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	3	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 3D Drop-In Animation:
\f0\b0 \'a0Start stone at\'a0
\f3\fs26 \cf5 \cb6 \strokec5 y + 1.5
\f0\fs28 \cf2 \cb3 \strokec2 , animate move + fade-in over\'a0
\f3\fs26 \cf5 \cb6 \strokec5 0.3s
\f0\fs28 \cf2 \cb3 \strokec2 .\cb1 \
\ls6\ilvl0
\f1\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	4	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 3D Markers:
\f0\b0 \'a0Use\'a0
\f3\fs26 \cf5 \cb6 \strokec5 SCNCylinder
\f0\fs28 \cf2 \cb3 \strokec2 \'a0for the dot (Radius 0.15, Height 0.02) positioned at\'a0
\f3\fs26 \cf5 \cb6 \strokec5 y + 0.3
\f0\fs28 \cf2 \cb3 \strokec2 .\cb1 \
\ls6\ilvl0
\f1\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	5	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 OGS Auth:
\f0\b0 \'a0Must fetch\'a0
\f3\fs26 \cf5 \cb6 \strokec5 csrftoken
\f0\fs28 \cf2 \cb3 \strokec2 \'a0cookie and explicitly set\'a0
\f3\fs26 \cf5 \cb6 \strokec5 X-CSRFToken
\f0\fs28 \cf2 \cb3 \strokec2 \'a0header in the POST request.\cb1 \
\ls6\ilvl0
\f1\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	6	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Native Keyboard Handler:
\f0\b0 \'a0Use an\'a0
\f3\fs26 \cf5 \cb6 \strokec5 NSViewRepresentable
\f0\fs28 \cf2 \cb3 \strokec2 \'a0to catch\'a0
\f3\fs26 \cf5 \cb6 \strokec5 keyDown
\f0\fs28 \cf2 \cb3 \strokec2 \'a0events to fix the "10 steps vs 1 step" issue.\cb1 \
\pard\pardeftab720\partightenfactor0

\f1\b\fs36 \cf2 \cb3 5. OGS Protocol Reference\
\pard\pardeftab720\sa360\partightenfactor0

\fs28 \cf2 Endpoint:
\f0\b0 \'a0
\f3\fs26 \cf5 \cb6 \strokec5 wss://wsp.online-go.com/
\f0\fs28 \cf2 \cb3 \strokec2 \'a0(Raw JSON Arrays,\'a0
\f1\b not
\f0\b0 \'a0Socket.io protocol).\

\f1\b Automatch Payload:
\f0\b0 \
\pard\pardeftab720\partightenfactor0

\f5\fs36 \cf7 \cb8 \strokec7 code\cb1 \
\pard\pardeftab720\partightenfactor0

\f0\fs28 \cf9 \cb8 \strokec9 JSON\cb1 \
\
\pard\pardeftab720\partightenfactor0

\f3\fs26 \cf10 \cb8 \strokec10 \{\
  \cf11 \strokec11 "uuid"\cf10 \strokec10 : \cf11 \strokec11 "UNIQUE_STRING"\cf10 \strokec10 ,\
  \cf11 \strokec11 "size_speed_options"\cf10 \strokec10 : [\
    \{ \cf11 \strokec11 "size"\cf10 \strokec10 : \cf11 \strokec11 "19x19"\cf10 \strokec10 , \cf11 \strokec11 "speed"\cf10 \strokec10 : \cf11 \strokec11 "live"\cf10 \strokec10 , \cf11 \strokec11 "system"\cf10 \strokec10 : \cf11 \strokec11 "byoyomi"\cf10 \strokec10  \}\
  ],\
  \cf11 \strokec11 "lower_rank_diff"\cf10 \strokec10 : -\cf12 \strokec12 3\cf10 \strokec10 ,\
  \cf11 \strokec11 "upper_rank_diff"\cf10 \strokec10 : \cf12 \strokec12 3\cf10 \strokec10 ,\
  \cf11 \strokec11 "rules"\cf10 \strokec10 : \{ \cf11 \strokec11 "condition"\cf10 \strokec10 : \cf11 \strokec11 "required"\cf10 \strokec10 , \cf11 \strokec11 "value"\cf10 \strokec10 : \cf11 \strokec11 "japanese"\cf10 \strokec10  \},\
  \cf11 \strokec11 "handicap"\cf10 \strokec10 : \{ \cf11 \strokec11 "condition"\cf10 \strokec10 : \cf11 \strokec11 "no-preference"\cf10 \strokec10 , \cf11 \strokec11 "value"\cf10 \strokec10 : \cf11 \strokec11 "disabled"\cf10 \strokec10  \}\
\}\cb1 \
\pard\pardeftab720\sa360\partightenfactor0

\f1\b\fs28 \cf2 \cb3 \strokec2 Seek Graph Logic:
\f0\b0 \
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls7\ilvl0\cf2 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 The client must store\'a0
\f1\b ALL
\f0\b0 \'a0games (started and unstarted).\cb1 \
\ls7\ilvl0\cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Filtering happens in the\'a0
\f1\b View
\f0\b0 \'a0(
\f3\fs26 \cf5 \cb6 \strokec5 OGSBrowserView
\f0\fs28 \cf2 \cb3 \strokec2 ):\cb1 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa60\partightenfactor0
\ls7\ilvl1
\f3\fs26 \cf5 \cb6 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec5 started == nil
\f0\fs28 \cf2 \cb3 \strokec2 \'a0-> Play Tab.\cb1 \
\ls7\ilvl1
\f3\fs26 \cf5 \cb6 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec5 started != nil
\f0\fs28 \cf2 \cb3 \strokec2 \'a0-> Watch Tab.\cb1 \
\pard\pardeftab720\partightenfactor0

\f1\b\fs36 \cf2 \cb3 6. "Gold Nugget" Code Snippets\
\pard\pardeftab720\sa360\partightenfactor0

\f2\i\b0\fs28 \cf2 Use these specific implementations to restore functionality without guessing.
\f0\i0 \
\pard\pardeftab720\partightenfactor0

\f1\b \cf2 A. 3D Camera Bridge (Float -> CGFloat)\
\pard\pardeftab720\sa360\partightenfactor0

\f0\b0 \cf2 Use this in\'a0
\f3\fs26 \cf5 \cb6 \strokec5 SceneManager3D
\f0\fs28 \cf2 \cb3 \strokec2 \'a0to accept UI state safely.\
\pard\pardeftab720\partightenfactor0

\f5\fs36 \cf7 \cb8 \strokec7 code\cb1 \
\pard\pardeftab720\partightenfactor0

\f0\fs28 \cf9 \cb8 \strokec9 Swift\cb1 \
\
\pard\pardeftab720\partightenfactor0

\f3\fs26 \cf10 \cb8 \strokec10 func \cf13 \strokec13 updateCameraPosition\cf10 \strokec10 (distance: Float, rotationX: Float, rotationY: Float, panX: Float, panY: Float) \{\
    \cf14 \strokec14 let\cf10 \strokec10  rotX = CGFloat(rotationX)\
    \cf14 \strokec14 let\cf10 \strokec10  rotY = CGFloat(rotationY)\
    \cf14 \strokec14 let\cf10 \strokec10  pX = CGFloat(panX)\
    \cf14 \strokec14 let\cf10 \strokec10  pY = CGFloat(panY)\
    \cf14 \strokec14 let\cf10 \strokec10  dist = CGFloat(distance)\
    \
    pivotNode.eulerAngles = SCNVector3(\cf12 \strokec12 0\cf10 \strokec10 , rotX, \cf12 \strokec12 0\cf10 \strokec10 )\
    \cf14 \strokec14 let\cf10 \strokec10  camY = \cf12 \strokec12 20\cf10 \strokec10  + (dist / \cf12 \strokec12 5.0\cf10 \strokec10 ) + pY\
    \cf14 \strokec14 let\cf10 \strokec10  camZ = \cf12 \strokec12 15\cf10 \strokec10  + dist\
    cameraNode.position = SCNVector3(pX, camY, camZ)\
    cameraNode.eulerAngles = SCNVector3(rotY - \cf12 \strokec12 0.9\cf10 \strokec10 , \cf12 \strokec12 0\cf10 \strokec10 , \cf12 \strokec12 0\cf10 \strokec10 )\
\}\cb1 \
\pard\pardeftab720\partightenfactor0

\f1\b\fs28 \cf2 \cb3 \strokec2 B. 2D Grid Centering Math\
\pard\pardeftab720\sa360\partightenfactor0

\f0\b0 \cf2 Use this in\'a0
\f3\fs26 \cf5 \cb6 \strokec5 BoardView2D
\f0\fs28 \cf2 \cb3 \strokec2 \'a0to fix the "uneven top margin."\
\pard\pardeftab720\partightenfactor0

\f5\fs36 \cf7 \cb8 \strokec7 code\cb1 \
\pard\pardeftab720\partightenfactor0

\f0\fs28 \cf9 \cb8 \strokec9 Swift\cb1 \
\
\pard\pardeftab720\partightenfactor0

\f3\fs26 \cf10 \cb8 \strokec10 struct GridMetrics \{\
    \cf14 \strokec14 let\cf10 \strokec10  cell: CGFloat; \cf14 \strokec14 let\cf10 \strokec10  startX: CGFloat; \cf14 \strokec14 let\cf10 \strokec10  startY: CGFloat; \cf14 \strokec14 let\cf10 \strokec10  boardSize: Int\
\}\
\
\pard\pardeftab720\partightenfactor0
\cf14 \strokec14 private\cf10 \strokec10  func calculateMetrics(size: CGSize, \cf12 \strokec12 boardSize\cf10 \strokec10 : Int) -> GridMetrics \{\
    \cf14 \strokec14 let\cf10 \strokec10  cell = size.width / CGFloat(boardSize + \cf12 \strokec12 1\cf10 \strokec10 )\
    \cf14 \strokec14 let\cf10 \strokec10  gridW = cell * CGFloat(boardSize - \cf12 \strokec12 1\cf10 \strokec10 )\
    \cf14 \strokec14 let\cf10 \strokec10  gridH = cell * CGFloat(boardSize - \cf12 \strokec12 1\cf10 \strokec10 )\
    \cf14 \strokec14 let\cf10 \strokec10  startX = (size.width - gridW) / \cf12 \strokec12 2.0\cf10 \strokec10 \
    \cf14 \strokec14 let\cf10 \strokec10  startY = (size.height - gridH) / \cf12 \strokec12 2.0\cf10 \strokec10  \cf15 \strokec15 // Centers perfectly\cf10 \strokec10 \
    \cf14 \strokec14 return\cf10 \strokec10  GridMetrics(cell: cell, \cf12 \strokec12 startX\cf10 \strokec10 : startX, \cf12 \strokec12 startY\cf10 \strokec10 : startY, \cf12 \strokec12 boardSize\cf10 \strokec10 : boardSize)\
\}\cb1 \
\pard\pardeftab720\partightenfactor0

\f1\b\fs36 \cf2 \cb3 \strokec2 7. Path Forward (Next Session)\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa60\partightenfactor0
\ls8\ilvl0
\fs28 \cf2 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	1	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 OGS Connection:
\f0\b0 \'a0Update\'a0
\f3\fs26 \cf5 \cb6 \strokec5 OGSClient.swift
\f0\fs28 \cf2 \cb3 \strokec2 \'a0with the robust Auth logic (CSRF) and Seek Graph logic (Don't filter started games).\cb1 \
\ls8\ilvl0
\f1\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	2	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 2D Polish:
\f0\b0 \'a0Update\'a0
\f3\fs26 \cf5 \cb6 \strokec5 ContentView2D
\f0\fs28 \cf2 \cb3 \strokec2 \'a0to place Lids on the right and use the Native Keyboard Handler. Update\'a0
\f3\fs26 \cf5 \cb6 \strokec5 BoardView2D
\f0\fs28 \cf2 \cb3 \strokec2 \'a0with the Red Glow and Centering math.\cb1 \
\ls8\ilvl0
\f1\b \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	3	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 3D Polish:
\f0\b0 \'a0Update\'a0
\f3\fs26 \cf5 \cb6 \strokec5 SceneManager3D
\f0\fs28 \cf2 \cb3 \strokec2 \'a0with the Drop-In animation and Cylinder marker. Ensure it keeps the\'a0
\f3\fs26 \cf5 \cb6 \strokec5 Float
\f0\fs28 \cf2 \cb3 \strokec2 \'a0interface.\cb1 \
}